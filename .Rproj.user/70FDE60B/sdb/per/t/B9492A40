{
    "contents" : "# #获取沪深股票的代码，用的是东方财富网的数???\n# library(RCurl)\n# library(stringr)\n# temp=getURL(\"http://quote.eastmoney.com/stocklist.html\",.encoding=\"GB2312\")\n# \n# #上海股票代码\n# temp1=substr(temp,regexpr(\"<div class=\\\"sltit\\\"><a name=\\\"sh\\\"/>上海股票</div>\",temp),regexpr(\"<div class=\\\"sltit\\\"><a name=\\\"sz\\\"/>深圳股票</div>\",temp))\n# shanghai=c()\n# n=length(gregexpr(\"</a></li>\",temp1)[[1]])\n# start=gregexpr(\"http://quote.eastmoney.com/\",temp1)[[1]]\n# end=gregexpr(\"</a></li>\",temp1)[[1]]\n# for(i in 1:n){\n#   a=substr(temp1,start+42,end-1)\n#   shanghai=rbind(shanghai,c(substr(a,1,str_length(a)-8),substr(a,str_length(a)-6,str_length(a)-1)))\n# }\n# row.names(shanghai)=1:n\n# colnames(shanghai)=c(\"股票名称\",\"股票代码\")\n# write.csv(shanghai,\"shanghai.csv\")\n# \n# #深圳股票代码\n# temp1=substr(temp,regexpr(\"<div class=\\\"sltit\\\"><a name=\\\"sz\\\"/>深圳股票</div>\",temp),regexpr(\"<div class=\\\"qphox\\\">\\r\\n    <div class=\\\"QVspace\\\"></div>\\r\\n    <div class=\\\"shengming\\\">\",temp))\n# shenzhen=c()\n# n=length(gregexpr(\"</a></li>\",temp1)[[1]])\n# start=gregexpr(\"http://quote.eastmoney.com/\",temp1)[[1]]\n# end=gregexpr(\"</a></li>\",temp1)[[1]]\n# for(i in 1:n){\n#   a=substr(temp1,start+42,end-1)\n#   shenzhen=rbind(shenzhen,c(substr(a,1,str_length(a)-8),substr(a,str_length(a)-6,str_length(a)-1)))\n# }\n# row.names(shenzhen)=1:n\n# colnames(shenzhen)=c(\"股票名称\",\"股票代码\")\n# write.csv(shenzhen,\"F:\\\\shenzhen.csv\")\n\n\n#获取沪深股票的代码，用的是东方财富网的数???\nsetwd()\nlibrary(RCurl)\nlibrary(stringr)\ntemp=getURL(\"http://quote.eastmoney.com/stocklist.html\",.encoding=\"GB2312\")\n\n#股票代码\npattern=\"http://quote.eastmoney.com/\"\ntemp1=strsplit(x=temp,split =pattern )[[1]]\ntemp2=temp1[grep(pattern = \"</a></li>\",  temp1)]\ntemp3=unlist(strsplit(temp2,\"</a></li>\"))\nind_sta=grep(pattern=\"201000\",temp3)\nind_end=grep(pattern=\"500159\",temp3)\ntable=temp3[seq(from=ind_sta,to=ind_end,by=2)]\ntable1=strsplit(table,\"\\r\\n\")\nCompany=data.frame(matrix(NA,ncol=2,nrow=length(seq_along(table1))))\nnames(Company)=c(\"company\",\"ID\")\nfor(i in seq_along(table1)){\n  company=unlist(strsplit(x=table1[[i]],split=\"[>()]\"))[2]\n  ID=unlist(strsplit(x=table1[[i]],split=\"[>()]\"))[3]\n  Company[i,]=c(company,ID)\n}\nrm(list=ls())\n#6开头为上海，0和3开头为深圳。\nkt=substr(x = Company$ID,start = 1,stop = 1)\nkt_ind=which(kt %in% c(\"6\",\"0\",\"3\"))\nkt=kt[kt_ind]\nCompany=Company[kt_ind,]\nCompany$SS_SZ=ifelse(kt %in% c(\"0\",\"3\"),\"SZ\",\"SS\")\nCompany$ID.SS_SZ=paste(Company$ID,\".\",Company$SS_SZ,sep = \"\")\n#筛选company里有“退市”两个字\nCompany=Company[-grep(pattern = \"退市\",Company$company),]\nsave.image(\"Company.RData\")\nwrite.csv(Company,\"company.csv\")\n\n\n\n\n#获取沪深股票的代码，用的是同花顺数据\nlibrary(RCurl)\nlibrary(stringr)\ntemp=getURL(\"http://bbs.10jqka.com.cn/codelist.html\",.encoding=\"GBK\")\n#股票代码\npattern=\"target='_blank' title=\"\ntemp1=strsplit(x = temp,split = pattern)[[1]]\ntemp2=temp1[grep(pattern=\"</a></li>\",  temp1)]\ntemp3=unlist(strsplit(temp2,\"</a></li>\"))\n",
    "created" : 1446623593565.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4218401789",
    "id" : "B9492A40",
    "lastKnownWriteTime" : 1446186286,
    "path" : "D:/Rwork/上市公司股票代码.R",
    "project_path" : null,
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}