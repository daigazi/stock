pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
pressButton()
install.packages("xdotool")
rep(x = c(2010:2015),c(1:4))
rep(1:4, c(2,1,2,1))
rep(1:4, each = 2, times = 3)  # length 24, 3 complete replications
rep(x = c(2010:2015)times=5)
rep(x = c(2010:2015),times=5)
rep(x = c(2010:2015),each=5)
rep(x=(1:4),each=1,times=5)
rm(list=ls())
library(rvest)
library(RCurl)
library(XML)
year=rep(x = c(2010:2015),each=5)
season=rep(x=(1:4),each=1,times=5)
time=cbind(year,season)
year=rep(x = c(2010:2015),each=4)
season=rep(x=(1:4),each=1,times=5)
time=cbind(year,season)
rep(x = c(2010:2015),each=4)
rep(x=(1:4),each=1,times=5)
year=rep(x = c(2010:2015),each=4)
season=rep(x=(1:4),each=1,times=5)
year=rep(x = c(2010:2015),each=4)
season=rep(x=(1:4),each=1,times=6)
time=cbind(year,season)
View(time)
url="http://quotes.money.163.com/trade/lsjysj_"
his_trade=list()
for(i in length(time)){
web=paste(url,stockNO,".html?year=",time[i,1],"&seson=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
list[[i]]=tab
}
stockNO="600000"
for(i in length(time)){
web=paste(url,stockNO,".html?year=",time[i,1],"&seson=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
list[[i]]=tab
}
length(time)
for(i in nrow(time)){
web=paste(url,stockNO,".html?year=",time[i,1],"&seson=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
list[[i]]=tab
}
for(i in nrow(time)){
web=paste(url,stockNO,".html?year=",time[i,1],"&seson=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
his_trade[[i]]=tab
}
hist_trade[[1]]
his_trade[[1]]
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO=60000,path){
year=rep(x = c(2010:2015),each=4)
season=rep(x=(1:4),each=1,times=6)
time=cbind(year,season)
his_trade=list()
for(i in nrow(time)){
web=paste(url,stockNO,".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
his_trade[[i]]=tab
}
return(his_trade)
}
a=history_trade()
a[[1]]
debug(history_trade)
a=history_trade()
i
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO=60000,path){
year=rep(x = c(2010:2015),each=4)
season=rep(x=(1:4),each=1,times=6)
time=cbind(year,season)
his_trade=list()
for(i in 1:nrow(time)){
web=paste(url,stockNO,".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
his_trade[[i]]=tab
}
return(his_trade)
}
a=history_trade()
a[[1]]
debug(history_trade)
a[[1]]
a=history_trade()
i
web
data
tab=readHTMLTable(doc =data)
url="http://quotes.money.163.com/trade/lsjysj_601668.html?year=2015&season=3"
data=getURL(url,.encoding = "utf-8")
url="http://quotes.money.163.com/trade/lsjysj_601668.html?year=2010&season=1"
data=getURL(url,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = NULL, trim=T)
rm(list=ls())
library(rvest)
library(RCurl)
library(XML)
library(knitr)
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO=60000,path){
year=rep(x = c(2010:2015),each=4)
season=rep(x=(1:4),each=1,times=6)
time=cbind(year,season)
his_trade=list()
for(i in 1:nrow(time)){
web=paste(url,stockNO,".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
his_trade[[i]]=tab[[2]]
}
return(his_trade)
}
a=history_trade()
debug(history_trade)
a=history_trade()
time
web
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO=600000,path){
year=rep(x = c(2010:2015),each=4)
season=rep(x=(1:4),each=1,times=6)
time=cbind(year,season)
his_trade=list()
for(i in 1:nrow(time)){
web=paste(url,stockNO,".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
his_trade[[i]]=tab[[2]]
}
return(his_trade)
}
a=history_trade()
debug(history_trade)
a=history_trade()
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO="600000",path){
year=rep(x = c(2010:2015),each=4)
season=rep(x=(1:4),each=1,times=6)
time=cbind(year,season)
his_trade=list()
stockNO=as.character(stockNO)
for(i in 1:nrow(time)){
web=paste(url,as.character(stockNO),".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
his_trade[[i]]=tab[[2]]
}
return(his_trade)
}
a=history_trade()
a[[1]]
url="http://quotes.money.163.com/trade/lsjysj_601668.html?year=2010&season=1"
# http://quotes.money.163.com/trade/lsjysj_60000.html?year=2010&season=1
data=getURL(url,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = NULL, trim=T)
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO="600000",path){
year=rep(x = c(2014:2015),each=4)
season=rep(x=(1:4),each=1,times=6)
time=cbind(year,season)
his_trade=list()
stockNO=as.character(stockNO)
for(i in 1:nrow(time)){
web=paste(url,as.character(stockNO),".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
his_trade[[i]]=tab[[4]]
}
return(his_trade)
}
a=history_trade()
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO="600000",path){
year=rep(x = c(2014:2015),each=4)
season=rep(x=(1:4),each=1,times=2)
time=cbind(year,season)
his_trade=list()
stockNO=as.character(stockNO)
for(i in 1:nrow(time)){
web=paste(url,as.character(stockNO),".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
his_trade[[i]]=tab[[4]]
}
return(his_trade)
}
a=history_trade()
a[[1]]
str(a[[1]])
b=unlist(a)
b
head(b)
b[1:20,]
str(b)
str(a[[1]])
df=data.frame(na)
df=data.frame(NA)
df
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO="600000",path){
year=rep(x = c(2014:2015),each=4)
season=rep(x=(1:4),each=1,times=2)
time=cbind(year,season)
#his_trade=list()
stockNO=as.character(stockNO)
for(i in 1:nrow(time)){
web=paste(url,as.character(stockNO),".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
tmp=tab[[4]]
colnames(tmp)=tmp[1,]
tmp=tmp[[-1,]]
#his_trade[[i]]=tmp
if(i==1){
his_trade=tmp
}else{
his_trade=rbind(his_trad,tmp)
}
}
return(his_trade)
}
a=history_trade()
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO="600000",path){
year=rep(x = c(2014:2015),each=4)
season=rep(x=(1:4),each=1,times=2)
time=cbind(year,season)
his_trade=data.frame(NA)
stockNO=as.character(stockNO)
for(i in 1:nrow(time)){
web=paste(url,as.character(stockNO),".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
tmp=tab[[4]]
colnames(tmp)=tmp[1,]
tmp=tmp[[-1,]]
#his_trade[[i]]=tmp
if(i==1){
his_trade=tmp
}else{
his_trade=rbind(his_trad,tmp)
}
}
return(his_trade)
}
a=history_trade()
debug(history_trade)
a=history_trade()
a=history_trade()
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO="600000",path){
year=rep(x = c(2014:2015),each=4)
season=rep(x=(1:4),each=1,times=2)
time=cbind(year,season)
his_trade=data.frame(NA)
stockNO=as.character(stockNO)
for(i in 1:nrow(time)){
web=paste(url,as.character(stockNO),".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
tmp=tab[[4]]
colnames(tmp)=tmp[1,]
tmp=tmp[-1,]
#his_trade[[i]]=tmp
if(i==1){
his_trade=tmp
}else{
his_trade=rbind(his_trad,tmp)
}
}
return(his_trade)
}
a=history_trade()
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO="600000",path){
year=rep(x = c(2014:2015),each=4)
season=rep(x=(1:4),each=1,times=2)
time=cbind(year,season)
his_trade=data.frame(NA)
stockNO=as.character(stockNO)
for(i in 1:nrow(time)){
web=paste(url,as.character(stockNO),".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
tmp=tab[[4]]
colnames(tmp)=tmp[1,]
tmp=tmp[-1,]
#his_trade[[i]]=tmp
if(i==1){
his_trade=tmp
}else{
his_trade=rbind(his_trade,tmp)
}
}
return(his_trade)
}
a=history_trade()
View(a)
View(a)
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO="600000",path){
year=rep(x = c(2014:2015),each=4)
season=rep(x=(1:4),each=1,times=2)
time=cbind(year,season)
#his_trade=data.frame(NA)
stockNO=as.character(stockNO)
for(i in 1:nrow(time)){
web=paste(url,as.character(stockNO),".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
tmp=tab[[4]]
colnames(tmp)=tmp[1,]
tmp=tmp[-1,]
#his_trade[[i]]=tmp
if(i==1){
his_trade=tmp
}else{
his_trade=rbind(his_trade,tmp)
}
}
return(his_trade)
}
a=history_trade()
rm(list=ls())
history_trade=function(url="http://quotes.money.163.com/trade/lsjysj_",stockNO="600000",path){
year=rep(x = c(2014:2015),each=4)
season=rep(x=(1:4),each=1,times=2)
time=cbind(year,season)
#his_trade=data.frame(NA)
stockNO=as.character(stockNO)
for(i in 1:nrow(time)){
web=paste(url,as.character(stockNO),".html?year=",time[i,1],"&season=",time[i,2],sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
tmp=tab[[4]]
colnames(tmp)=tmp[1,]
tmp=tmp[-1,]
#his_trade[[i]]=tmp
if(i==1){
his_trade=tmp
}else{
his_trade=rbind(his_trade,tmp)
}
}
return(his_trade)
}
a=history_trade()
url="http://quotes.money.163.com/trade/lszjlx_601668,14.html"
data=getURL(url,.encoding = "utf-8")
tab=readHTMLTable(doc=data)
tab[[4]]
capital_flow=function(url=url,stockNO="600000",page=c(0:5),path){
stockNO=as.character(stockNO)
for(i in page){
web=paste(url,as.character(stockNO),",",i,".html",sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
tmp=tab[[4]]
colnames(tmp)=tmp[1,]
tmp=tmp[-1,]
#his_trade[[i]]=tmp
if(i==1){
his_trade=tmp
}else{
his_trade=rbind(his_trade,tmp)
}
}
return(his_trade)
}
a=capital_flow()
url="http://quotes.money.163.com/trade/lszjlx_"
capital_flow=function(url=url,stockNO="600000",page=c(0:5),path){
stockNO=as.character(stockNO)
for(i in page){
web=paste(url,stockNO,",",i,".html",sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
tmp=tab[[4]]
colnames(tmp)=tmp[1,]
tmp=tmp[-1,]
#his_trade[[i]]=tmp
if(i==1){
his_trade=tmp
}else{
his_trade=rbind(his_trade,tmp)
}
}
return(his_trade)
}
a=capital_flow()
debug(capital_flow)
a=capital_flow()
url
web="http://quotes.money.163.com/trade/lszjlx_"
capital_flow=function(url=web,stockNO="600000",page=c(0:5),path){
stockNO=as.character(stockNO)
for(i in page){
web=paste(url,stockNO,",",i,".html",sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
tmp=tab[[4]]
colnames(tmp)=tmp[1,]
tmp=tmp[-1,]
#his_trade[[i]]=tmp
if(i==1){
his_trade=tmp
}else{
his_trade=rbind(his_trade,tmp)
}
}
return(his_trade)
}
a=capital_flow()
debug(capital_flow)
a=capital_flow()
url
tmp
capital_flow=function(url=web,stockNO="600000",page=c(0:5),path){
stockNO=as.character(stockNO)
for(i in page){
web=paste(url,stockNO,",",i,".html",sep="")
data=getURL(web,.encoding = "utf-8")
tab=readHTMLTable(doc =data,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
tmp=tab[[4]]
colnames(tmp)=tmp[1,]
tmp=tmp[-1,]
#his_trade[[i]]=tmp
if(i==0){
capital_flow=tmp
}else{
capital_flow=rbind(capital_flow,tmp)
}
}
return(capital_flow)
}
a=capital_flow()
url="http://quotes.money.163.com/f10/gszl_601668.html#01f02"
ComIntro=getURL(url,.encoding = "utf-8")
tab=readHTMLTable(doc =ComIntro,header = T,colClasses = "character", trim=T, stringsAsFactors = FALSE)
tab[[7]]
ComIntro=tab[[4]]
colnames(ComIntro)=c("value","name","value","name")
ComIntro=rbind(ComIntro[,c(1,2)],ComIntro[,c(3,4)])
ComIntro=ComIntro[complete.cases(ComIntro),]
View(ComIntro)
grep(ComIntro[,1],pattern = "主营业务")
ComIntro[10,2]
rm(list=ls())
