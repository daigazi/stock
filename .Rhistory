```{r,eval=FALSE}
<<<<<<< HEAD
install.packages("XML")
install.packages("XML")
=======
library("knitr", lib.loc="~/R/win-library/3.1")
knitr
knit
par(mar = rep(2.3, 4))
for (i in seq(pi/2, -4/3 * pi, length = 12)) {
plot(0, 0, pch = 20, ann = FALSE, axes = FALSE)
arrows(0, 0, cos(i), sin(i))
axis(1, 0, "6"); axis(2, 0, "9")
axis(3, 0, "12"); axis(4, 0, "3"); box()
}
for (i in seq(pi/2, -4/3 * pi, length = 12)) {
plot(0, 0, pch = 20, ann = FALSE, axes = FALSE)
arrows(0, 0, cos(i), sin(i))
axis(1, 0, "6"); axis(2, 0, "9")
axis(3, 0, "12"); axis(4, 0, "3"); box()
}
```{r,fig.width=4,fig.height=4,out.width='0.35\\linewidth',fig.show='animate'}
par(mar = rep(2.3, 4))
for (i in seq(pi/2, -4/3 * pi, length = 12)) {
plot(0, 0, pch = 20, ann = FALSE, axes = FALSE)
arrows(0, 0, cos(i), sin(i))
axis(1, 0, "6"); axis(2, 0, "9")
axis(3, 0, "12"); axis(4, 0, "3"); box()
}
```{r demo, prompt=TRUE}
a=1
```
plot(1)
par(mar = c(4, 4, 4, 4))
plot(1)
library(xlsx)
rm(list=ls())
setwd()
library(RCurl)
library(stringr)
temp=getURL("http://quote.eastmoney.com/stocklist.html",.encoding="GB2312")
getwd()
pattern="http://quote.eastmoney.com/"
library(XML)
detach("package:knitr", unload=TRUE)
library("knitr", lib.loc="~/R/win-library/3.1")
detach("package:knitr", unload=TRUE)
library(RCurl)
library(stringr)
library(XML)
temp=getURL("http://quote.eastmoney.com/stocklist.html",.encoding="GB2312")
pattern="http://quote.eastmoney.com/"
temp1=strsplit(x=temp,split =pattern )
names(temp1)
temp1=strsplit(x=temp,split =pattern )[[1]]
temp1
temp1[[1]]
temp2=temp1[grep(pattern = "</a></li>",  temp1)]
temp3=unlist(strsplit(temp2,"</a></li>"))
temp1=strsplit(x=temp,split =pattern )[[1]]
temp2=temp1[grep(pattern = "</a></li>",  temp1)]
temp3=unlist(strsplit(temp2,"</a></li>"))
tmp3
temp3
table=readHTMLTable(temp)
tmp=readLines(con = temp)
temp=getURL("http://quote.eastmoney.com/stocklist.html",.encoding="GB2312")
tmp=readLines(con = temp)
rm(list=ls())
#获取沪深股票的代码，用的是东方财富网的数据
## 加载包
library(RCurl)
library(stringr)
library(XML)
#网址
url=getURL("http://quote.eastmoney.com/stocklist.html",.encoding="GB2312")
url="http://quote.eastmoney.com/stocklist.html"
rawdat=getURL(url,.encoding="GB2312")
rawdat1=strsplit(x=rawdat,split =pattern )
pattern="http://quote.eastmoney.com/"
rawdat1=strsplit(x=rawdat,split =pattern )[[1]]
rawdat1[[1]]
rawdat1[[2500]]
grep(pattern = "</a></li>",  rawdat1)
grepl(pattern = "</a></li>",  rawdat1)
tmp=rawdat1[grepl(pattern = "</a></li>",  tmp)]
tmp=strsplit(x=rawdat,split =pattern )[[1]]
tmp=rawdat1[grepl(pattern = "</a></li>",  tmp)]
tmp[2500]
tmp=unlist(strsplit(tmp,"</a></li>"))
tmp[1]
tmp[2500]
tmp[2501]
gc()
library("WindR", lib.loc="~/R/win-library/3.1")
w.start()
library("XML", lib.loc="~/R/win-library/3.1")
rm(list=ls())
library(kintr)
opts_chunk$set(comment=NA, fig.width=6, fig.height=6,cache = TRUE)
library(knitr)
opts_chunk$set(comment=NA, fig.width=6, fig.height=6,cache = TRUE)
library(XML)
library(kintr)
library(knitr)
fileUrl <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlTreeParse(fileUrl,useInternal=TRUE)
doc <- xmlTreeParse(fileUrl,useInternal=TRUE)
fileUrl <- "http://www.w3school.com.cn/example/xmle/simple.xml"
doc <- xmlTreeParse(fileUrl,useInternal=TRUE)
doc
rootNode <- xmlRoot(doc) #XML节点
names(rootNode)
xmlName(rootNode)
rootNode[[1]]
rootNode[[1]][[1]]
rootNode[[1]][[2]]
rootNOde[[2]]
xpathSApply(rootNode,"/food",xmlValue)  #顶层节点
xpathSApply(rootNode,"//name",xmlValue) #次一层节点
xpathSApply(rootNode,food[@name],xmlValue) #次一层节点
xpathSApply(rootNode,food[@attr-name="name"],xmlValue) #次一层节点
xpathSApply(rootNode,food[name],xmlValue) #次一层节点
xpathSApply(rootNode,"food[name]",xmlValue) #次一层节点
xpathSApply(rootNode,"food[attr-name="name"]",xmlValue) #次一层节点
xpathSApply(rootNode,"food[attr-name='name']",xmlValue) #次一层节点
rm(list=ls())
library(XML)
fileUrl <- "http://quote.eastmoney.com/stocklist.html"
doc <- xmlTreeParse(fileUrl,useInternal=TRUE)
doc <- xmlTreeParse(fileUrl,useInternal=TRUE,encoding = "GBK")
fileUrl <- "http://bbs.10jqka.com.cn/codelist.html"
doc <- xmlTreeParse(fileUrl,useInternal=TRUE,encoding = "GBK")
fileUrl <- "http://espn.go.com/nfl/team/_/name/bal/baltimore-ravens"
doc <- htmlTreeParse(fileUrl,useInternal=TRUE)
xpathSApply(doc,"//li[@class='score']",xmlValue)
scores <- xpathSApply(doc,"//li[@class='score']",xmlValue)
teams <- xpathSApply(doc,"//li[@class='team-name']",xmlValue)
scores
teams
fileUrl <- "http://www.w3school.com.cn/example/xmle/simple.xml"
doc <- xmlTreeParse(fileUrl,useInternal=TRUE)
xpathSApply(doc,"food[@class]",xmlValue) #次一层节点
xpathSApply(doc,"food[@class="name"]",xmlValue) #对文档操作而不是节点文档，次一层节点
xpathSApply(doc,"//food[@class]",xmlValue) #次一层节点
xpathSApply(doc,"//food[@class='name']",xmlValue)
xpathSApply(doc,"//food[@class='price']",xmlValue) #对文档操作而不是节点文档，次一层节点
fileUrl <- "http://espn.go.com/nfl/team/_/name/bal/baltimore-ravens"
doc <- htmlTreeParse(fileUrl,useInternal=TRUE)
scores <- xpathSApply(doc,"//li[@class='score']",xmlValue) #对文档操作，而不是节点文件
teams <- xpathSApply(doc,"//li[@class='team-name']",xmlValue)
scores
teams
>>>>>>> refs/remotes/origin/master
